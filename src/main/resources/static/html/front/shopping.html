<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>商品详情</title>
<link href="../../css/bootstrap.css" rel="stylesheet">
<link href="../../css/buy.css" rel="stylesheet">
<link href="../../css/font-awesome.css" rel="stylesheet">

</head>
             
<body>
<div class="popover-header">
<a class="text-primary" id="userName">当前用户:</a>
<label class="float-right">
<a href="cart"><input type="button" value="购物车"></a>
</label>
</div>
<div class="bg-secondary">
<br>

</div>
<div class="goods">
<img class="goods_img" id="goodsimg">
        <div class="goods_info">
                <div class="goods_info_title">
                    <h4 class="text-center"  ><span id="goodsname"></span>
                     </h4>
                </div>
                <div class="goods_info_price">
                      <h5 class="font-weight-bold">价格：<a id="goodsprice"></a></h5>
               
                     <h5 class="font-weight-bold"> 数量： <input onChange="check()" type="number" value="1" title="请输入购买数量"> </h5>   
                     <label onClick="check">check</label>
                     (库存:<span id="store"></span>件)
                     
                       <input type="button"  class="text-dark"value="加入购物车">&nbsp;&nbsp;&nbsp;&nbsp;
                       <a href="#"><input type="button"  class="text-dark"value="立即购买" ></a>
                </div>
        </div>
</div>



            <div id="goodsDescription">
       				
            </div>
            <div id="goodsComments" style="width:100%;height:300px">
					
            </div>

<div class="modal-footer">
 Copyright&nbsp;&copy;&nbsp;2020&nbsp;&nbsp;ZYL团队&nbsp;版权所有
</div>


</body>
<script src="../../js/jquery.js"></script>


<script>
$.ajax({
    type: 'GET',
    url: "queryName",
    success: function(msg) {
        if (msg.success) {
            $("#userName").text("当前用户："+msg.data);
        } else {
            $("#userName").text('未登录');
        }
    }

});
window.onload=function(){
	let u = window.location.href;
	$.ajax({
	    type: 'GET',
	    url: "getGoodsDetails"+u.substring(u.lastIndexOf("/")),
	    success: function(msg) {
	        if (msg.success) {
	            $("#goodsimg").attr("src","../"+msg.data["imgUrl"]);
	            $("#goodsprice").text(msg.data["price"]);
	            $("#store").text(msg.data["store"]);
	            $("#goodsDescription").text("描述："+msg.data["description"]);
	            $("#goodsComments").empty();
	            for(let i=0,len=msg.data["comments"].length;i<len;i++){
	            	let comment = msg.data["comments"][i];
	            	let s = "<span>评论人："+comment["person"]+"评论详情："+comment["details"]+"评论时间："+comment["dateTime"]+"</span><br>";
	            	console.log(s);
	            	$("#goodsComments").append(s);
	            	
	            }
	            
	        }
	    }
	});
}


</script>
</html>

